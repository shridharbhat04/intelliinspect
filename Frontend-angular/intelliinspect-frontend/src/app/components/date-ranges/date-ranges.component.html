<div class="p-6 bg-gray-50 rounded-md scrollable-wrapper">
  <div class="date-ranges-container">
    <!-- Column 1: Training Period -->
    <div class="date-range-box">
      <strong>Training Period</strong>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>Start</mat-label>
        <input matInput [matDatepicker]="trainStartPicker" [(ngModel)]="trainStart" />
        <mat-datepicker-toggle matSuffix [for]="trainStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #trainStartPicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>End</mat-label>
        <input matInput [matDatepicker]="trainEndPicker" [(ngModel)]="trainEnd" />
        <mat-datepicker-toggle matSuffix [for]="trainEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #trainEndPicker></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- Column 2: Testing Period -->
    <div class="date-range-box">
      <strong>Testing Period</strong>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>Start</mat-label>
        <input matInput [matDatepicker]="testStartPicker" [(ngModel)]="testStart" />
        <mat-datepicker-toggle matSuffix [for]="testStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #testStartPicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>End</mat-label>
        <input matInput [matDatepicker]="testEndPicker" [(ngModel)]="testEnd" />
        <mat-datepicker-toggle matSuffix [for]="testEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #testEndPicker></mat-datepicker>
      </mat-form-field>
    </div>

    <!-- Column 3: Simulation Period -->
    <div class="date-range-box">
      <strong>Simulation Period</strong>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>Start</mat-label>
        <input matInput [matDatepicker]="simStartPicker" [(ngModel)]="simStart" />
        <mat-datepicker-toggle matSuffix [for]="simStartPicker"></mat-datepicker-toggle>
        <mat-datepicker #simStartPicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field appearance="outline" class="w-full mt-2">
        <mat-label>End</mat-label>
        <input matInput [matDatepicker]="simEndPicker" [(ngModel)]="simEnd" />
        <mat-datepicker-toggle matSuffix [for]="simEndPicker"></mat-datepicker-toggle>
        <mat-datepicker #simEndPicker></mat-datepicker>
      </mat-form-field>
    </div>
  </div>

<!-- Success -> Summary Cards -->
<div *ngIf="validationResult" class="validation-summary content-block">
  <h3 class="validation-title">‚úÖ Validation Successful</h3>

  <div class="summary-cards">
    
    <!-- Training Period -->
    <div class="summary-card">
      <h4 class="card-title">Training Period</h4>
      <p class="card-line"><strong>{{ trainingSummary?.durationDays }}</strong> days</p>
      <p class="card-line">
        <strong>{{ trainingSummary?.start | date:'medium' }}</strong> ‚Üí 
        <strong>{{ trainingSummary?.end | date:'medium' }}</strong>
      </p>
      <p class="card-line">Records: <strong>{{ trainingSummary?.count }}</strong></p>
    </div>

    <!-- Testing Period -->
    <div class="summary-card">
      <h4 class="card-title">Testing Period</h4>
      <p class="card-line"><strong>{{ testingSummary?.durationDays }}</strong> days</p>
      <p class="card-line">
        <strong>{{ testingSummary?.start | date:'medium' }}</strong> ‚Üí 
        <strong>{{ testingSummary?.end | date:'medium' }}</strong>
      </p>
      <p class="card-line">Records: <strong>{{ testingSummary?.count }}</strong></p>
    </div>

    <!-- Simulation Period -->
    <div class="summary-card">
      <h4 class="card-title">Simulation Period</h4>
      <p class="card-line"><strong>{{ simulationSummary?.durationDays }}</strong> days</p>
      <p class="card-line">
        <strong>{{ simulationSummary?.start | date:'medium' }}</strong> ‚Üí 
        <strong>{{ simulationSummary?.end | date:'medium' }}</strong>
      </p>
      <p class="card-line">Records: <strong>{{ simulationSummary?.count }}</strong></p>
    </div>

  </div>
</div>

<!-- Error box (unchanged) -->
<div *ngIf="errorMessage" class="mt-6 p-4 content-block">
  <h3 class="font-semibold text-red-700">‚ùå Validation Failed</h3>
  <p>{{ errorMessage }}</p>
</div>

<!-- Timeline Bar Chart -->
<div *ngIf="validationResult" class="mt-8">
  <h3 class="font-semibold mb-2 content-block">üìä Timeline (Monthly Record Counts)</h3>
  <div class="chart-container">
    <canvas baseChart 
      [data]="chartData"
      [options]="chartOptions"
      [type]="'bar'">
    </canvas>
  </div>
</div>


  <div class="mt-6 flex gap-4 active-step-footer ">
    <button 
      class="step-pill" 
      (click)="goBack()">
      Back
    </button>
    <button
      class="step-pill"
      (click)="validateRanges()"
      [disabled]="!trainStart || !trainEnd || !testStart || !testEnd || !simStart || !simEnd">
      Validate Ranges
    </button>
    <button
      class="step-pill"
      (click)="goNext()"
      [disabled]="!rangesValid">
      Next
    </button>
  </div>
</div>
